From e3b70de05d4074bc39ad3af22f877c2672db3611 Mon Sep 17 00:00:00 2001
From: Kalyan Kondapally <kalyan.kondapally@intel.com>
Date: Fri, 4 Nov 2016 16:07:33 -0700
Subject: [PATCH 15/16] Remove usage of DesktopFactory.

This is highly experimental. Eventually, the goal is to only have
platform specific parts in Wayland and core implementation as part
of Chromium. Once, we have more matured implementation, initiate
discussion upstream.
---
 .../widget/desktop_aura/desktop_factory_ozone.cc   | 29 ------------
 .../widget/desktop_aura/desktop_factory_ozone.h    | 53 ----------------------
 .../widget/desktop_aura/desktop_screen_ozone.cc    | 15 ------
 .../desktop_aura/desktop_window_tree_host_ozone.cc | 26 -----------
 4 files changed, 123 deletions(-)
 delete mode 100644 ui/views/widget/desktop_aura/desktop_factory_ozone.cc
 delete mode 100644 ui/views/widget/desktop_aura/desktop_factory_ozone.h
 delete mode 100644 ui/views/widget/desktop_aura/desktop_screen_ozone.cc
 delete mode 100644 ui/views/widget/desktop_aura/desktop_window_tree_host_ozone.cc

diff --git a/ui/views/widget/desktop_aura/desktop_factory_ozone.cc b/ui/views/widget/desktop_aura/desktop_factory_ozone.cc
deleted file mode 100644
index e0a4489..0000000
--- a/ui/views/widget/desktop_aura/desktop_factory_ozone.cc
+++ /dev/null
@@ -1,29 +0,0 @@
-// Copyright 2013 The Chromium Authors. All rights reserved.
-// Use of this source code is governed by a BSD-style license that can be
-// found in the LICENSE file.
-
-#include "ui/views/widget/desktop_aura/desktop_factory_ozone.h"
-
-#include "base/logging.h"
-
-namespace views {
-
-// static
-DesktopFactoryOzone* DesktopFactoryOzone::impl_ = NULL;
-
-DesktopFactoryOzone::DesktopFactoryOzone() {
-}
-
-DesktopFactoryOzone::~DesktopFactoryOzone() {
-}
-
-DesktopFactoryOzone* DesktopFactoryOzone::GetInstance() {
-  CHECK(impl_) << "DesktopFactoryOzone accessed before constructed";
-  return impl_;
-}
-
-void DesktopFactoryOzone::SetInstance(DesktopFactoryOzone* impl) {
-  impl_ = impl;
-}
-
-} // namespace views
diff --git a/ui/views/widget/desktop_aura/desktop_factory_ozone.h b/ui/views/widget/desktop_aura/desktop_factory_ozone.h
deleted file mode 100644
index bb6cbd2..0000000
--- a/ui/views/widget/desktop_aura/desktop_factory_ozone.h
+++ /dev/null
@@ -1,53 +0,0 @@
-// Copyright 2013 The Chromium Authors. All rights reserved.
-// Use of this source code is governed by a BSD-style license that can be
-// found in the LICENSE file.
-
-#ifndef UI_VIEWS_WIDGET_DESKTOP_AURA_DESKTOP_FACTORY_OZONE_H_
-#define UI_VIEWS_WIDGET_DESKTOP_AURA_DESKTOP_FACTORY_OZONE_H_
-
-#include "ui/views/views_export.h"
-
-namespace display {
-class Screen;
-}
-
-namespace gfx {
-class Rect;
-}
-
-namespace views {
-class DesktopNativeWidgetAura;
-class DesktopWindowTreeHost;
-
-namespace internal {
-class NativeWidgetDelegate;
-}
-
-class VIEWS_EXPORT DesktopFactoryOzone {
- public:
-  DesktopFactoryOzone();
-  virtual ~DesktopFactoryOzone();
-
-  // Returns the instance.
-  static DesktopFactoryOzone* GetInstance();
-
-  // Sets the implementation delegate. Ownership is retained by the caller.
-  static void SetInstance(DesktopFactoryOzone* impl);
-
-  // Delegates implementation of DesktopWindowTreeHost::Create externally to
-  // Ozone implementation.
-  virtual DesktopWindowTreeHost* CreateWindowTreeHost(
-      internal::NativeWidgetDelegate* native_widget_delegate,
-      DesktopNativeWidgetAura* desktop_native_widget_aura) = 0;
-
-  // Delegates implementation of DesktopScreen externally to
-  // Ozone implementation.
-  virtual display::Screen* CreateDesktopScreen() = 0;
-
- private:
-  static DesktopFactoryOzone* impl_; // not owned
-};
-
-}  // namespace views
-
-#endif // UI_VIEWS_WIDGET_DESKTOP_AURA_DESKTOP_FACTORY_OZONE_H_
diff --git a/ui/views/widget/desktop_aura/desktop_screen_ozone.cc b/ui/views/widget/desktop_aura/desktop_screen_ozone.cc
deleted file mode 100644
index 870413f..0000000
--- a/ui/views/widget/desktop_aura/desktop_screen_ozone.cc
+++ /dev/null
@@ -1,15 +0,0 @@
-// Copyright 2013 The Chromium Authors. All rights reserved.
-// Use of this source code is governed by a BSD-style license that can be
-// found in the LICENSE file.
-
-#include "ui/views/widget/desktop_aura/desktop_screen.h"
-
-#include "ui/views/widget/desktop_aura/desktop_factory_ozone.h"
-
-namespace views {
-
-display::Screen* CreateDesktopScreen() {
-  return DesktopFactoryOzone::GetInstance()->CreateDesktopScreen();
-}
-
-}  // namespace views
diff --git a/ui/views/widget/desktop_aura/desktop_window_tree_host_ozone.cc b/ui/views/widget/desktop_aura/desktop_window_tree_host_ozone.cc
deleted file mode 100644
index e67af41..0000000
--- a/ui/views/widget/desktop_aura/desktop_window_tree_host_ozone.cc
+++ /dev/null
@@ -1,26 +0,0 @@
-// Copyright 2013 The Chromium Authors. All rights reserved.
-// Use of this source code is governed by a BSD-style license that can be
-// found in the LICENSE file.
-
-#include "ui/aura/window_tree_host.h"
-#include "ui/native_theme/native_theme_aura.h"
-#include "ui/views/widget/desktop_aura/desktop_factory_ozone.h"
-#include "ui/views/widget/desktop_aura/desktop_window_tree_host.h"
-
-namespace views {
-
-DesktopWindowTreeHost* DesktopWindowTreeHost::Create(
-    internal::NativeWidgetDelegate* native_widget_delegate,
-    DesktopNativeWidgetAura* desktop_native_widget_aura) {
-  DesktopFactoryOzone* d_factory = DesktopFactoryOzone::GetInstance();
-
-  return d_factory->CreateWindowTreeHost(native_widget_delegate,
-                                         desktop_native_widget_aura);
-}
-
-// static
-ui::NativeTheme* DesktopWindowTreeHost::GetNativeTheme(aura::Window* window) {
-  return ui::NativeThemeAura::instance();
-}
-
-}  // namespace views
-- 
2.7.4

